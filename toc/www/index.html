$def with (config)
$var title: Main
$var show_nav: true
$var jsfiles: webtools/roslibjs/include/EventEmitter2/eventemitter2.js webtools/ros2djs/include/EaselJS/easeljs.js static/roslib.min.js  static/bootstrap-notify.min.js /static/app.js static/index.js


<style>
   #map {
    height: 400px;
    width: 100%;
   }

    .alert {
        color: rgb(0, 0, 0);
        padding: 2px;

    }

    .alert > [data-notify="title"] {
        display: block;
        font-weight: bold;
        margin-bottom: 0px;
    }
    .alert > [data-notify="message"] {
        font-size: 100%;
    }
    small {
        font-size: 50%;
    }
</style>



<div class="section">
<!--     <div class="jumbotron jumbotron-fluid">
        <div class="container-fluid">
            <h1 class="display-4">TOC</h1>
        </div>
    </div> -->

    <div class="container-fluid">


        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Map</h3>
                    </div>
                    <div class="panel-body">
                        <div id="map"></div>
                    </div>
                </div>
            </div>

        </div>


        <div class="row">
            <div id="estop" class="alert alert-warning" style="color: black; display: none;">
                WARNING
            </div>
            <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Robots</h3>
                    </div>
                    <div class="panel-body">
                        <table class="table table-condensed table-striped">
                            <thead>
                                <tr>
                                    <th>Robot</th>
                                    <th>Description</th>
                                    <th>Ping</th>
                                    <th>VPN IP (shell)</th>
                                </tr>
                            </thead>
                            <tbody>
                                $for r in config['robots']:
                                    <tr>
                                        <td id="dashboard_${r}"><a href="/robot/$r/dashboard">$r</a></td>
                                        <td id="description_${r}">$config['robots'][r]['description']</a></td>
                                        <td id="ping_${r}">
                                            <span style="color: #aa0000;" id="connection_broken${r}" class="hide glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                                            <span style="color: #00aa00;" id="connection_ok${r}" class="hide glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
                                        </td>
                                        <td id="ip_${r}"><a href="/robot/$config['robots'][r]['ip']/shell/">$config['robots'][r]['ip']</a></td>
                                    </tr>
                            </tbody>
                        </table>


                        </ul>
                    </div>
                </div>
            </div>
<!--             <div class="col-md-4">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                    </div>
                    <div class="panel-body">
                    </div>
                </div>
            </div> -->
        </div>
    </div>
</div>


<script 
    async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCniXaQ1L0MYa_T4xNwPMokJSjkDIcUcvo&callback=locInit">
</script>



<script>
    document.onready = function() {
        $for r in config['robots']:
            setTimeout(function() {
                init_robot("${r}", "$config['robots'][r]['ip']", "$config['robots'][r]['topics']['gps']", "$config['robots'][r]['port']");
            }, 500);
            

    }
</script>
