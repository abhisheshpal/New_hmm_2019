<?xml version="1.0"?>
<launch>


    
    <arg name="use_xsens" default="false" />
    <arg name="use_imu" default="true" />



    <!-- UM7 IMU ARGS -->
    <arg name="um7_imu_port" default="/dev/ttyUSB0"/>

    <!-- XSENS IMU ARGS -->
    <arg name="device" default="auto" doc="device file of the IMU"/>
    <arg name="baudrate" default="0" doc="baudrate of the IMU"/>
    <arg name="timeout" default="0.002" doc="timeout for the IMU communication"/>
    <arg name="frame_id" default="xsens" doc="frame id of the IMU"/>
    <arg name="frame_local" default="ENU" doc="desired frame orientation (ENU, NED or NWU)"/>
    <arg name="no_rotation_duration" default="0" doc="duration (int in seconds) of the no-rotation calibration procedure"/>


    <group if="$(arg use_imu)">
      <!-- UM7 IMU -->
      <node pkg="um7" type="um7_driver" name="um7_imu" output="screen" unless="$(arg use_xsens)">
         <param name="port" value="$(arg um7_imu_port)"/>
      </node> 


      <!-- XSENS IMU -->
      <node pkg="xsens_driver" type="mtnode.py" name="xsens_driver" output="screen" if="$(arg use_xsens)" >
          <param name="device" value="$(arg device)"/>
          <param name="baudrate" value="$(arg baudrate)"/>
          <param name="timeout" value="$(arg timeout)"/>
          <param name="frame_id" value="$(arg frame_id)"/>
          <param name="frame_local" value="$(arg frame_local)"/>
          <param name="no_rotation_duration" value="$(arg no_rotation_duration)"/>

          <remap from="/fix" to="/imu/fix"/>
          <remap from="/vel" to="/imu/vel"/>
      </node>
    </group>
    
</launch>
