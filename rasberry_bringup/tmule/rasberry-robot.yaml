---
init_cmd: |
  source /opt/ros/kinetic/setup.bash
  default_iface=$(awk '$2 == 00000000 { print $1 }' /proc/net/route)
  default_ip=`ip addr show dev "$default_iface" | grep "inet " | sed 's@ *inet \([0-9\.]*\).*@\1@'`
  export BASE_CONFIG_DIR=`readlink -f .`
  export ROBOT_NAME=`hostname`
  export ROS_MASTER=$default_ip
  export ROS_IP=`ip route get $ROS_MASTER | grep "src" | sed 's/.*src \([0-9\.]*\).*/\1/'`
  export ROS_HOSTNAME=$ROS_IP
  export ROS_MASTER_URI="http://$ROS_MASTER:11311/"  
windows:
- name: init
  panes:
  - roscore
  - sleep 3; if [ -r "$BASE_CONFIG_DIR/$ROBOT_NAME.yaml" ]; then rosparam load "$BASE_CONFIG_DIR/$ROBOT_NAME.yaml"; fi
- name: robot
  panes:
  - roslaunch thorvald_bringup thorvald_ii_4wd4ws_std.launch
- name: localisation
  panes:
  - # roslaunch rasberry_bringup localisationXXX 
- name: navigation
  panes:
  - # roslaunch rasberry_bringup navigationXXX
  - # roslaunch topological_navigation XXX
- name: people_perception
  panes:
  - # roslaunch rasberry_bringup XXX
- name: coordination_robot
  panes:
  - roslaunch rosbridge_server rosbridge_websocket.launch
  - # rosrun rosduct XXX _
- name: dataset_recording
  panes:
  - # rosbag record -a
