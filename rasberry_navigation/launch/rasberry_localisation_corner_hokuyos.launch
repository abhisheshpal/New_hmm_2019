<?xml version="1.0" ?>

<launch>

  <arg name="ekf_local_config" default="$(find rasberry_navigation)/config/ekf_local.yaml"/>
  <arg name="publish_tf" default="true" />

  <arg name="initial_pose_x" default="0.0"/>
  <arg name="initial_pose_y" default="0.0"/>
  <arg name="initial_pose_a" default="0.0"/>

  <arg name="initial_cov_xx" default="0.0"/>
  <arg name="initial_cov_yy" default="0.0"/>
  <arg name="initial_cov_aa" default="i0.0"/>

  <arg name="use_omni" default="false" />

  <!-- merge two scans to scan topic for amcl and move_base -->
  <include file="$(find rasberry_navigation)/launch/corner_hokuyos_laser_merger.launch"/>


  <!-- imu-ekf localization for odom-to-base_link -->
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_local" clear_params="true" output="screen" >
    <rosparam command="load" file="$(arg ekf_local_config)"/>
    <param name="publish_tf" value="$(arg publish_tf)"/>
  </node> 

  <!-- amcl -->
  <include file="$(find rasberry_navigation)/launch/amcl.launch">
    <arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
    <arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
    <arg name="initial_pose_a" value="$(arg initial_pose_a)"/>

    <arg name="initial_cov_xx" value="$(arg initial_cov_xx)"/>
    <arg name="initial_cov_yy" value="$(arg initial_cov_yy)"/>
    <arg name="initial_cov_aa" value="$(arg initial_cov_aa)"/>

    <arg name="use_omni" value="$(arg use_omni)" />
  </include>

</launch>
